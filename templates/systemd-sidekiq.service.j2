[Unit]
Description=Sidekiq
Requires=redis.service
Wants=mysqld.service postgresql.service
After=redis.service mysqld.service postgresql.service
 
[Service]
Type=simple
User={{ scumblr_rails_user }}
Group={{ scumblr_rails_user }}
WorkingDirectory={{ scumblr_root }}
ExecStart=/usr/bin/bash -lc 'bundle exec sidekiq -d -l {{ scumblr_root }}/log/sidekiq.log -e {{ scumblr_rails_env }} -r {{ scumblr_root }} -P -P {{ scumblr_root }}/tmp/pids/sidekiq.pid'
TimeoutSec=30
RestartSec=15s
Restart=always
PIDFile={{ scumblr_root }}/tmp/pids/sidekiq.pid
 
[Install]
WantedBy=multi-user.target
